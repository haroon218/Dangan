<mat-dialog-content id="dialog">
  <div class="overlay" *ngIf="loading">
    <div class="loader"></div>
  </div>
    <div class="create">
      <div class="create-text">{{Organization.organizationId ? 'Update'  : 'Create'}}</div>
      <div class="close-icon" style="text-align: right;padding-right:10px;color:white">
        <mat-icon class="material-icons" mat-dialog-close>clear</mat-icon>
      </div>
    </div>
    <mat-list>
      <mat-tab-group>
        <mat-tab label="Basic Information" id="basic"> 
 
          <!-- <div class="headtag"><p class="setPtag">Basic Information</p></div> -->
          
        <div class="BasicInfo" style="margin-top: 0px;">

            <div class="OrgName">
            <form id="orgform">
              <mat-form-field id="input-text">
                <mat-label>Organization Name</mat-label>
                <input
                  *ngIf="!Organization.organizationId; else readOnlyInput"
                  type="text"
                  matInput
                  [(ngModel)]="Organization.name"
                  [formControl]="usernameFormControl"
                  placeholder=""
              />
              <ng-template #readOnlyInput>
                  <input
                      type="text"
                      matInput
                      [(ngModel)]="Organization.name"
                      [formControl]="usernameFormControl"
                      placeholder=""
                      readonly
                  />
              </ng-template>
                <mat-error *ngIf="usernameFormControl.hasError('required')">
                  Name is <strong>required</strong>
                </mat-error>
                

              </mat-form-field>
            </form>
          </div>

          <div class="Address">
            <form id="orgform">
              <mat-form-field id="input-text">
                <mat-label>Address</mat-label>
                <input
                  type="text"
                  matInput [(ngModel)]="Organization.address"
                  [formControl]="addressFormControl"
                  placeholder=""
                />
                <mat-error *ngIf="addressFormControl.hasError('required')">
                  Address is <strong>required</strong>
                </mat-error>
              
              </mat-form-field>
            </form>
            </div>
      
            <div class="CompanyRegNum">
              <form id="orgform">
                <mat-form-field id="input-text">
                  <mat-label>Company Registration Number</mat-label>
                  <input
                    type="text"
                    matInput [(ngModel)]="Organization.companyRegistrationNumber"
                    [formControl]="regnumFormControl"
                    placeholder=""
                  />
                  <mat-error *ngIf="regnumFormControl.hasError('required')">
                    RegisterNumber is <strong>required</strong>
                  </mat-error>
                
                </mat-form-field>
              </form>
              </div>
            
          </div>
          <div class="secondRow">
            <div class="vatnumber">
              <form id="orgform">
                <mat-form-field id="input-text">
                  <mat-label>VAT Number</mat-label>
                  <input
                    type="text"
                    matInput [(ngModel)]="Organization.vatNumber"
                    placeholder=""
                  />
                
                </mat-form-field>
              </form>
            </div>
          </div>
          <mat-divider></mat-divider>

          <div class="headtag"><p class="setPtag">Primary Contact</p></div>
          <div class="BasicInfo">

            <div class="OrgName">
            <form id="orgform">
              <mat-form-field id="input-text">
                <mat-label>Name</mat-label>
                <input
                  type="text"
                  matInput [(ngModel)]="Organization.primaryContactName"
                  placeholder=""
                />
              
                

              </mat-form-field>
            </form>
          </div>

          <div class="Address">
            <form id="orgform">
            
              <mat-form-field id="input-text" >
                <mat-label>Email</mat-label>
                <input
                  type="email"
                  matInput [(ngModel)]="Organization.primaryContactEmail"
                  [formControl]="emailFormControl"
                  placeholder=""
                />
                <mat-error *ngIf="emailFormControl.hasError('email')">
                  Please enter a valid email address
                </mat-error>
              
              </mat-form-field>
            </form>
            </div>
          
            <div class="CompanyRegNum">
              <form id="orgform">
                <mat-form-field id="input-text">
                  <mat-label>Phone Number</mat-label>
                  <input
                    type="text"
                    matInput [(ngModel)]="Organization.primaryContactNumber"
                    placeholder=""
                  />
                </mat-form-field>
              </form>
            </div>    
          </div>
          <div class="secondRow">
            <div class="vatnumber">
              <form id="orgform">
                <mat-form-field id="input-text">
                  <mat-label>Position</mat-label>
                  <input
                    type="text"
                    matInput [(ngModel)]="Organization.primaryContactPosition"
                    placeholder=""
                  />
                
                </mat-form-field>
              </form>
            </div>
          </div>
          <mat-divider></mat-divider>
          <div class="headtag"><p class="setPtag">Accounts Contact</p></div>
          <div class="BasicInfo">

            <div class="OrgName">
            <form id="orgform">
              <mat-form-field id="input-text">
                <mat-label>Name</mat-label>
                <input
                  type="text"
                  matInput [(ngModel)]="Organization.accountsContactName"
                  placeholder=""
                />
              
                

              </mat-form-field>
            </form>
          </div>

          <div class="Address">
            <form id="orgform">
            
              <mat-form-field id="input-text" >
                <mat-label>Email</mat-label>
                <input
                  type="email"
                  matInput [(ngModel)]="Organization.accountsContactEmail"
                  [formControl]="AccountemailFormControl"
                  placeholder=""
                />
                <mat-error *ngIf="AccountemailFormControl.hasError('email')">
                  Please enter a valid email address
                </mat-error>
              
              </mat-form-field>
            </form>
            </div>
          
            <div class="CompanyRegNum">
              <div class="setToggle">
              <!-- <mat-slide-toggle  [(ngModel)]="isPOMode" (change)="onToggleChange()">PO Required</mat-slide-toggle>   -->
            </div>
            </div>    
          </div>
          <div class="secondRow" style="margin-top:-31px;">
            <div class="vatnumber" id="colorPo">
              <mat-slide-toggle  [(ngModel)]="Organization.isPORequired" (change)="onToggleChange()" id="setcolor">PO Required</mat-slide-toggle>  

            </div>
          </div>
        </mat-tab>
        <mat-tab label="Approvers"> 
          <div style="height: 48vh;">

          <div class="searchis" id="searchsetis">
            <form class="example-form" id="filteris">
              <mat-form-field class="example-full-width">
                <input
                  type="text"
                  placeholder="Select 2 Approvers for Approving TimeSheet"
                  aria-label="Number"
                  matInput
                  [formControl]="myControl"
                  [(ngModel)]="value" 
                  [matAutocomplete]="auto"
                  (focus)="addUsers()"
                />
                <button
                  *ngIf="value" 
                  matSuffix
                  mat-icon-button
                  aria-label="Clear"
                  (click)="clearInput()"
                >
                  <mat-icon class="material-icons">clear</mat-icon>
                </button>
                <mat-autocomplete #auto="matAutocomplete">
                  <mat-option *ngFor="let option of filteredUsers | async" [value]="option">
                    {{ option }}
                  </mat-option>
                </mat-autocomplete>
              </mat-form-field>
            </form>
          </div>  
          
          <!-- <div class="SyncBtn" style="margin-top:-63px">
          <mat-icon (click)="Synchronize()" matTooltip="Approvers Synchronized">swap_vert</mat-icon>
          </div> -->
        <div class="setOverflow" id="setOverflows">
          <table mat-table [dataSource]="userdataSource">
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef> Name </th>
              <td mat-cell *matCellDef="let element"> {{element.FirstName||element.firstName}} </td>
            </ng-container>
            <ng-container matColumnDef="weight">
              <th mat-header-cell *matHeaderCellDef> <ng-container *ngIf="!isSmallScreen"
                >Email</ng-container> </th>
              <td mat-cell *matCellDef="let element"> 
                <ng-container *ngIf="!isSmallScreen"
                          > {{element.EmailAddress || element.email }}</ng-container>
                 
              </td>
            </ng-container>
            <ng-container matColumnDef="symbol">
              <th mat-header-cell *matHeaderCellDef> Symbol </th>
              <td mat-cell *matCellDef="let element"> 
                <mat-icon class='material-icons' (click)="deleteUsers(element, i)" style="color: red;cursor: pointer;">delete</mat-icon>
              </td>
            </ng-container>
          
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table> 
        </div>
      </div>
      </mat-tab>
  </mat-tab-group>
    </mat-list> 
  </mat-dialog-content>
  <mat-dialog-actions class="action" align="end">
    <button (click)="cancelDialog()" mat-stroked-button color="primary">Cancel</button>
    <button (click)="addOrganization()" mat-stroked-button style="background-color:#00b2e2;color:white">{{Organization.organizationId  ? 'Update'  : 'Create'}}</button>
  </mat-dialog-actions>
  
